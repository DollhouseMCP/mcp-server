# DollhouseMCP

## Project Status
[![MCP Compatible](https://img.shields.io/badge/MCP-Compatible-green)](https://modelcontextprotocol.io)
[![npm version](https://img.shields.io/npm/v/@dollhousemcp/mcp-server.svg)](https://www.npmjs.com/package/@dollhousemcp/mcp-server)
[![License: AGPL-3.0](https://img.shields.io/badge/License-AGPL--3.0-blue.svg)](https://www.gnu.org/licenses/agpl-3.0)
[![GitHub Views](https://komarev.com/ghpvc/?username=DollhouseMCP&repo=mcp-server&label=Repository+Views&style=flat)](https://github.com/DollhouseMCP/mcp-server)

## Build & Quality
[![Core Build & Test](https://github.com/DollhouseMCP/mcp-server/actions/workflows/core-build-test.yml/badge.svg)](https://github.com/DollhouseMCP/mcp-server/actions/workflows/core-build-test.yml)
[![Build Artifacts](https://github.com/DollhouseMCP/mcp-server/actions/workflows/build-artifacts.yml/badge.svg)](https://github.com/DollhouseMCP/mcp-server/actions/workflows/build-artifacts.yml)
[![Test Coverage](https://img.shields.io/badge/Coverage-1858%2B%20Tests-green)](https://github.com/DollhouseMCP/mcp-server/tree/main/__tests__)
[![Enterprise-Grade Security](https://img.shields.io/badge/Security-Enterprise%20Grade-purple)](SECURITY.md)

## Platform Support
[![Windows Build Status](https://img.shields.io/badge/Windows-‚úì_Tested-0078D4?logo=windows&logoColor=white)](https://github.com/DollhouseMCP/mcp-server/actions/workflows/core-build-test.yml?query=branch:main "Windows CI Build Status")
[![macOS Build Status](https://img.shields.io/badge/macOS-‚úì_Tested-000000?logo=apple&logoColor=white)](https://github.com/DollhouseMCP/mcp-server/actions/workflows/core-build-test.yml?query=branch:main "macOS CI Build Status")
[![Linux Build Status](https://img.shields.io/badge/Linux-‚úì_Tested-FCC624?logo=linux&logoColor=black)](https://github.com/DollhouseMCP/mcp-server/actions/workflows/core-build-test.yml?query=branch:main "Linux CI Build Status")
[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?logo=docker&logoColor=white)](https://github.com/DollhouseMCP/mcp-server/blob/main/Dockerfile)

## Technology
[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Node.js](https://img.shields.io/badge/Node.js-339933?logo=nodedotjs&logoColor=white)](https://nodejs.org/)
[![Extended Node Compatibility](https://github.com/DollhouseMCP/mcp-server/actions/workflows/extended-node-compatibility.yml/badge.svg)](https://github.com/DollhouseMCP/mcp-server/actions/workflows/extended-node-compatibility.yml)
[![Docker Testing](https://github.com/DollhouseMCP/mcp-server/actions/workflows/docker-testing.yml/badge.svg)](https://github.com/DollhouseMCP/mcp-server/actions/workflows/docker-testing.yml)

---

**üåê Repository**: https://github.com/DollhouseMCP/mcp-server  
**üè™ Collection**: https://github.com/DollhouseMCP/collection  
**üì¶ NPM Package**: https://www.npmjs.com/package/@dollhousemcp/mcp-server  
**üåç Website**: https://dollhousemcp.com

---

<div align="center">
  <img src="docs/assets/dollhouse-logo.png" alt="DollhouseMCP" width="200" />
  
  # Open Source, Community-Powered AI Customization
  
  ### Create, Edit, and Share Customization Elements for Your AI Platforms
  
  [![Install](https://img.shields.io/badge/Install-npm%20install%20@dollhousemcp/mcp--server-blue?style=for-the-badge)](https://www.npmjs.com/package/@dollhousemcp/mcp-server)
  [![Collection](https://img.shields.io/badge/Browse-Community%20Collection-purple?style=for-the-badge)](https://github.com/DollhouseMCP/collection)
  [![Contribute](https://img.shields.io/badge/Share-Your%20Elements-green?style=for-the-badge)](https://github.com/DollhouseMCP/mcp-server#contributing)
</div>

---

## Elements That Customize Your AI's Capabilities and Actions

**DollhouseMCP** is open source, community-powered AI customization. Create your own customization elements‚Äîpersonas that shape behavior, skills that add capabilities, templates for consistent outputs, agents for automation, and memories for persistent context‚Äîor use and modify an ever-growing number of customization elements from the community. Every element you create can be saved to your portfolio and used again or shared back to the DollhouseMCP Collection to help others.

### What Are Customization Elements?

- **Personas** ‚Äì Shape how your AI acts and responds in specific domains
- **Skills** ‚Äì Add specialized capabilities your AI can use
- **Templates** ‚Äì Ensure consistent, high-quality outputs
- **Agents** ‚Äì Enable autonomous task completion with smart decision-making
- **Memory** ‚Äì Persistent context storage across sessions

### Core Capabilities

- **üåç  Community Element Library** ‚Äì A growing number of tested personas, skills, templates, agents, and memories
- **‚ú®  Create Custom Elements** ‚Äì Create personas, skills, templates, agents, and memories from scratch using natural language
- **ü§ù  Open Source** ‚Äì AGPL-3.0 licensed, ensuring community contributions stay free
- **üìö  The DollhouseMCP Collection** ‚Äì Install any community element with one command
- **üõ†Ô∏è  41 Professional Tools** ‚Äì Complete toolkit for element creation and management
- **üõ°Ô∏è  Security-First Validation** ‚Äì All elements validated against hundreds of attack vectors
- **‚ö°  Hot-Swap Elements** ‚Äì Change personas, skills, and templates without restarting as needed
- **üì¶  Personal Portfolio** ‚Äì Your library of custom AI configurations on your local computer or personal GitHub repo

### Use Cases

<table>
<tr>
<td width="25%" align="center">
<h4>üë®‚Äçüíª For Developers</h4>
<p>Use community-powered code review personas and debugging skills. Share your language-specific optimizations.</p>
</td>
<td width="25%" align="center">
<h4>‚úçÔ∏è For Writers</h4>
<p>Access community-crafted writing styles and templates. Contribute your genre expertise.</p>
</td>
<td width="25%" align="center">
<h4>üéØ For Professionals</h4>
<p>Leverage community-built industry elements. Share your domain knowledge.</p>
</td>
<td width="25%" align="center">
<h4>üåü For Everyone</h4>
<p>Give your AI any personality you want. Describe it, modify it, save it to your portfolio, share it with the world.</p>
</td>
</tr>
</table>

### Get Started

```bash
npm install @dollhousemcp/mcp-server
```
See [Quick Start](#-quick-start) for complete setup instructions.

---

## üéØ Element Types

### ‚úÖ Available Now

<table>
<tr>
<td width="50%">

#### üé≠ Personas
Shape how your AI behaves and responds
- **Creative Writer** - Imaginative storyteller for engaging narratives
- **Business Consultant** - Strategic advisor for business decisions
- **Debug Detective** - Systematic problem-solver for code issues
- **Security Analyst** - Vulnerability assessment and threat analysis
- **Technical Analyst** - Deep dive technical documentation
- **Use**: `"Activate the creative writer persona"`

</td>
<td width="50%">

#### üí° Skills
Add specialized capabilities your AI can use
- **Code Review** - Analyze code quality and suggest improvements
- **Data Analysis** - Statistical analysis and visualization
- **Language Translation** - Multi-language communication
- **API Integration** - Connect and interact with external services
- **Testing Automation** - Generate and run test suites
- **Use**: `"Enable the code review skill"`

</td>
</tr>
<tr>
<td width="50%">

#### üìù Templates
Ensure consistent, high-quality outputs
- **Project Proposal** - Structured business proposals
- **Penetration Test Report** - Security assessment documentation
- **Meeting Notes** - Organized meeting summaries
- **Code Review** - Systematic code evaluation format
- **Documentation** - Technical documentation structure
- **Use**: `"Use the project proposal template"`

</td>
<td width="50%">

#### ü§ñ Agents
Enable autonomous task completion
- **Code Reviewer** - Automated code quality assessment
- **Task Manager** - Project organization and tracking
- **Research Assistant** - Information gathering and synthesis
- **Academic Researcher** - Scholarly research and citations
- **Security Fix Specialist** - Vulnerability remediation
- **Use**: `"Run the code reviewer agent"`

</td>
</tr>
<tr>
<td colspan="2">

#### üß† Memory <span style="background-color: #4CAF50; color: white; padding: 2px 6px; border-radius: 3px; font-size: 0.8em;">NEW in v1.9.0</span>
Persistent context across sessions with intelligent organization
- **Text-based storage** - Currently supports text content (PDFs, images, and other media types coming soon)
- **Date-based folders** - Automatic YYYY-MM-DD organization prevents flat directory issues
- **YAML format** - Human-readable structured data (vs Markdown for other elements)
- **Smart deduplication** - SHA-256 hashing prevents duplicate storage
- **Search indexing** - Fast queries across thousands of entries
- **Use**: `"Create a memory for this project"` or `"Remember this conversation"`

**Typical file sizes**: Single memories up to ~100KB, folder structure enables unlimited collections

</td>
</tr>
</table>

### üöÄ Coming Soon

<table>
<tr>
<td width="50%">

#### üéØ Ensembles
Combine multiple elements as one unified entity
- **Full-Stack Developer** - Frontend + Backend + DevOps skills
- **Writing Suite** - Creative + Technical + Editorial capabilities
- **Security Team** - Analyst + Auditor + Remediation skills
- **Data Science Platform** - Analysis + Visualization + ML skills
- **Status**: In development

</td>
<td width="50%">

#### üìã Prompts
Reusable instruction sets
- **Code Review Checklist** - Systematic review steps
- **Security Audit Guide** - Vulnerability assessment process
- **Writing Guidelines** - Style and tone instructions
- **Debug Workflow** - Problem-solving methodology
- **Status**: Planned

</td>
</tr>
<tr>
<td width="50%">

#### üîß Tools
External function calls and commands
- **Git Operations** - Version control management
- **Database Queries** - Direct database interaction
- **API Calls** - External service integration
- **File Operations** - Advanced file manipulation
- **Status**: Under consideration

</td>
<td width="50%">

#### üìö Memory Enhancements
Expanding memory capabilities
- **PDF Support** - Text extraction from PDF documents
- **Image Analysis** - Visual content understanding
- **Audio Transcription** - Voice and sound processing
- **Video Understanding** - Motion and scene analysis
- **Status**: Roadmap planned

</td>
</tr>
</table>

## üí¨ Natural Language Usage Examples

DollhouseMCP is designed for natural language interaction. Just describe what you want in plain English - you don't need to be overly specific, the system will figure it out.

### Importing from the Community Collection

**Natural Language Examples:**
- `"Show me all the personas in the Dollhouse Collection"`
- `"What creative writing personas are available?"`
- `"Install the storyteller persona from the collection"`
- `"Search for Python development skills"`
- `"Find templates for technical documentation"`

**Direct Commands (if you prefer):**
```bash
browse_collection type="personas"
search_collection "creative writing"
install_content "personas/storyteller.md"
```

### Managing Your Portfolio

**Natural Language Examples:**
- `"What's in my portfolio?"`
- `"Show me all my custom personas"`
- `"Sync my portfolio with GitHub"`
- `"Create a backup of my elements"`
- `"Search my portfolio for marketing templates"`

**Direct Commands (if you prefer):**
```bash
portfolio_status
list_elements type="personas"
sync_portfolio
search_portfolio "marketing"
```

### Working with Elements

**Natural Language Examples:**
- `"Activate the code reviewer persona"`
- `"What's currently active?"`
- `"Switch to creative writing mode"`
- `"Deactivate all elements"`
- `"Show me details about the data analyst skill"`
- `"Create a new persona for customer support"`
- `"Edit the email template to be more formal"`

**Direct Commands (if you prefer):**
```bash
activate_element "code-reviewer" type="personas"
get_active_elements
deactivate_element type="personas"
get_element_details "data-analyst" type="skills"
create_element type="personas" name="customer-support"
```

### Complete Workflow Example

Here's how a typical session might look:

```
You: "I need help with creative writing"
Assistant: "I'll help you with creative writing. Let me check what personas are available..."

You: "Show me creative writing personas in the collection"
Assistant: [Shows list of available creative writing personas]

You: "Install and activate the storyteller persona"
Assistant: "I've installed and activated the Storyteller persona. I'm now ready to help craft engaging narratives..."

You: "Actually, let me create my own persona for science fiction writing"
Assistant: "I'll help you create a custom science fiction writing persona. What characteristics would you like?"

You: "Make it focus on hard sci-fi with attention to scientific accuracy"
Assistant: [Creates custom persona with specified traits]

You: "Save that to my portfolio as 'Hard SciFi Writer'"
Assistant: "I've saved 'Hard SciFi Writer' to your portfolio. You can activate it anytime."
```

### Pro Tips

- **Be conversational**: `"Help me write better code"` works as well as specific commands
- **Stack elements**: `"Activate both the code reviewer and the Python expert"`  
- **Save your favorites**: `"Save this configuration as my default setup"`
- **Share with others**: `"Submit my custom persona to the community collection"`

## üì¶ Installation

### Choose Your Installation Method

<table>
<tr>
<th>Method</th>
<th>Best For</th>
<th>Pros</th>
<th>Cons</th>
</tr>
<tr>
<td><strong>Local Install</strong><br>(Recommended)</td>
<td>Most users, multiple configs, customization</td>
<td>‚úÖ Multiple setups<br>‚úÖ Easy backup<br>‚úÖ No permissions</td>
<td>‚ùå Longer path in config</td>
</tr>
<tr>
<td><strong>npx</strong></td>
<td>Quick testing, always latest</td>
<td>‚úÖ No install<br>‚úÖ Always updated</td>
<td>‚ùå Slower startup<br>‚ùå Needs internet</td>
</tr>
<tr>
<td><strong>Global Install</strong></td>
<td>Single shared instance</td>
<td>‚úÖ Short command</td>
<td>‚ùå Only one version<br>‚ùå Needs sudo/admin</td>
</tr>
</table>

---

### Method 1: Local Installation (Recommended)

Create a dedicated folder for your MCP servers and install there:

```bash
# Create MCP servers directory
mkdir ~/mcp-servers
cd ~/mcp-servers

# Install DollhouseMCP
npm install @dollhousemcp/mcp-server
```

**Configure Claude Desktop:**

Add to your config file:
- **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
- **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`  
- **Linux**: `~/.config/Claude/claude_desktop_config.json`

```json
{
  "mcpServers": {
    "dollhousemcp": {
      "command": "node",
      "args": ["/Users/YOUR_USERNAME/mcp-servers/node_modules/@dollhousemcp/mcp-server/dist/index.js"]
    }
  }
}
```

üí° **Pro tip**: Replace `/Users/YOUR_USERNAME` with your actual home directory path.

---

### Method 2: Always Latest with npx

No installation needed! Configure Claude Desktop to always use the latest version:

```json
{
  "mcpServers": {
    "dollhousemcp": {
      "command": "npx",
      "args": ["@dollhousemcp/mcp-server@latest"]
    }
  }
}
```

üìù **Note**: The `@latest` tag ensures you always get the newest version. Remove it to use npm's cached version.

---

### Method 3: Global Installation

```bash
# Install globally (may require sudo/admin)
npm install -g @dollhousemcp/mcp-server
```

**Configure Claude Desktop:**

```json
{
  "mcpServers": {
    "dollhousemcp": {
      "command": "dollhousemcp"
    }
  }
}
```

‚ö†Ô∏è **Warning**: Only one version system-wide. Consider local installation for more flexibility.

---

### üéØ Advanced: Multiple Configurations

Want separate portfolios for different contexts? Create multiple local installations:

```bash
# Personal assistant
mkdir ~/mcp-servers/personal
cd ~/mcp-servers/personal
npm install @dollhousemcp/mcp-server

# Work assistant
mkdir ~/mcp-servers/work
cd ~/mcp-servers/work
npm install @dollhousemcp/mcp-server

# Creative writing
mkdir ~/mcp-servers/creative
cd ~/mcp-servers/creative
npm install @dollhousemcp/mcp-server
```

**Configure each with its own portfolio:**

```json
{
  "mcpServers": {
    "dollhouse-personal": {
      "command": "node",
      "args": ["/Users/YOU/mcp-servers/personal/node_modules/@dollhousemcp/mcp-server/dist/index.js"],
      "env": {
        "DOLLHOUSE_PORTFOLIO_DIR": "/Users/YOU/portfolios/personal"
      }
    },
    "dollhouse-work": {
      "command": "node",
      "args": ["/Users/YOU/mcp-servers/work/node_modules/@dollhousemcp/mcp-server/dist/index.js"],
      "env": {
        "DOLLHOUSE_PORTFOLIO_DIR": "/Users/YOU/portfolios/work"
      }
    }
  }
}
```

Now you can enable/disable different configurations in Claude Desktop as needed!

---

### ‚úÖ Verify Installation

After configuring and restarting Claude Desktop, test with:

```
list_elements type="personas"
```

You should see your available personas. If not, check the [Troubleshooting](#-troubleshooting) section.

---

### üìÅ Default Portfolio Location

By default, your elements are stored in:
- **macOS/Linux**: `~/.dollhouse/portfolio/`
- **Windows**: `%USERPROFILE%\.dollhouse\portfolio\`

Use the `DOLLHOUSE_PORTFOLIO_DIR` environment variable to customize this location.

## üöÄ Quick Start

Once installed, try these commands in Claude:

```bash
# Browse available personas
list_elements type="personas"

# Activate a persona
activate_element name="creative-writer" type="personas"

# Browse the community collection
browse_collection type="personas"

# Search for specific content
search_collection query="python" type="skills"
```

> **üìò New User?** Follow our [Roundtrip Workflow Guide](docs/guides/ROUNDTRIP_WORKFLOW_USER_GUIDE.md) for a complete walkthrough of discovering, customizing, and sharing AI elements with the community.

## ‚ú® Key Features

| Feature | Description |
|---------|-------------|
| üé≠ **41 MCP Tools** | Complete portfolio element management through chat interface |
| üè™ **GitHub Collection** | Browse, search, install, and submit personas to community collection |
| üîÑ **Roundtrip Workflow** | Complete cycle: discover ‚Üí customize ‚Üí share ‚Üí collaborate |
| üìÅ **GitHub Portfolio** | Personal repository for storing and versioning your AI elements |
| üë§ **User Identity System** | Environment-based attribution for persona creators |
| üÜî **Unique ID System** | Advanced ID generation: `{type}_{name}_{author}_{YYYYMMDD}-{HHMMSS}` |
| üí¨ **Chat-Based Management** | Create, edit, and validate personas through conversational interface |
| üîÑ **Real-time Operations** | Live editing with automatic version bumping and validation |
| üì¶ **NPM Installation** | Install MCP servers from npm with cross-platform support and atomic operations |
| üõ°Ô∏è **Data Protection** | Copy-on-write for default personas, comprehensive backup system |
| üè† **Local-First Architecture** | Full functionality without cloud dependency |

## üé® Portfolio System

The DollhouseMCP Portfolio system provides a comprehensive framework for managing AI elements locally and in the cloud.

### Portfolio Structure

Your portfolio is organized by element type:

```
~/.dollhouse/portfolio/
‚îú‚îÄ‚îÄ personas/       # Behavioral profiles (Markdown files)
‚îú‚îÄ‚îÄ skills/         # Discrete capabilities (Markdown files)
‚îú‚îÄ‚îÄ templates/      # Reusable content structures (Markdown files)
‚îú‚îÄ‚îÄ agents/         # Goal-oriented actors (Markdown files)
‚îú‚îÄ‚îÄ memories/       # Persistent context (YAML files with date folders)
‚îÇ   ‚îú‚îÄ‚îÄ 2025-09-18/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ project-context.yaml
‚îÇ   ‚îî‚îÄ‚îÄ 2025-09-19/
‚îÇ       ‚îú‚îÄ‚îÄ meeting-notes.yaml
‚îÇ       ‚îî‚îÄ‚îÄ code-review.yaml
‚îî‚îÄ‚îÄ ensembles/      # Element combinations (Markdown files)
```

**Note on File Types:**
- **Markdown (.md)**: Used for personas, skills, templates, agents, and ensembles - human-readable with YAML frontmatter
- **YAML (.yaml)**: Used exclusively for memories - structured data optimized for context storage

**Memory Organization:**
- Memories use automatic **YYYY-MM-DD** folder structure to prevent flat directory performance issues
- Each memory file can grow up to ~100KB before creating a new file
- Folder structure enables unlimited memory collections without degradation

### Key Features

- **Local-First Architecture**: All elements stored locally with optional cloud sync
- **GitHub Integration**: Sync your portfolio with GitHub for backup and sharing
- **Version Control**: Full git integration for tracking changes
- **Smart Detection**: Automatically identifies element types from content
- **Flexible Naming**: Use any naming convention you prefer

### Portfolio Management Tools

Use the comprehensive set of MCP tools to manage your portfolio:

- `list_portfolio_elements` - View all elements across types
- `sync_portfolio` - Synchronize with GitHub
- `upload_to_portfolio` - Share elements with the community
- `download_from_portfolio` - Get elements from GitHub

For detailed portfolio documentation, see the [Portfolio Guide](docs/guides/PORTFOLIO_SETUP_GUIDE.md).

## üîí Security

DollhouseMCP implements enterprise-grade security measures to protect your data and ensure safe operation.

### Security Features

- **Input Sanitization**: All user inputs validated and sanitized
- **Path Traversal Prevention**: Filesystem access strictly controlled
- **YAML Injection Protection**: Safe parsing with validation
- **Command Injection Prevention**: No direct shell command execution
- **Token Encryption**: OAuth tokens encrypted at rest
- **Rate Limiting**: API calls throttled to prevent abuse
- **Audit Logging**: Security events tracked for analysis

### Security Testing

- **Automated Security Scanning**: GitHub Advanced Security enabled
- **Dependency Scanning**: Automated vulnerability detection
- **Code Analysis**: Static analysis with CodeQL
- **Secret Scanning**: Prevents credential leaks

### Reporting Security Issues

If you discover a security vulnerability, please:

1. **DO NOT** create a public GitHub issue
2. Open a private security advisory on GitHub
3. Include steps to reproduce if possible
4. Allow up to 48 hours for initial response

For more details, see our [Security Policy](SECURITY.md).

## üõ†Ô∏è Development

### Getting Started

```bash
# Clone the repository
git clone https://github.com/DollhouseMCP/mcp-server.git
cd mcp-server

# Install dependencies
npm install

# Build the project
npm run build

# Run tests
npm test
```

### Development Workflow

1. **Create Feature Branch**: `git checkout -b feature/your-feature`
2. **Make Changes**: Implement your feature or fix
3. **Run Tests**: `npm test`
4. **Build**: `npm run build`
5. **Submit PR**: Create pull request to develop branch

### Available Scripts

- `npm run build` - Compile TypeScript
- `npm run dev` - Development mode with watch
- `npm test` - Run test suite
- `npm run lint` - Check code style
- `npm run typecheck` - TypeScript type checking

### Project Structure

```
src/
‚îú‚îÄ‚îÄ index.ts           # Main server entry
‚îú‚îÄ‚îÄ tools/            # MCP tool implementations
‚îú‚îÄ‚îÄ utils/            # Utility functions
‚îú‚îÄ‚îÄ types/            # TypeScript definitions
‚îî‚îÄ‚îÄ elements/         # Element system
```

For detailed development guides, see [Development Documentation](docs/development/).

## üè≠ Architecture

### System Overview

DollhouseMCP follows a modular, extensible architecture built on the Model Context Protocol (MCP) standard.

### Core Components

#### MCP Server
- **Transport**: StdioServerTransport for Claude Desktop integration
- **Protocol**: JSON-RPC 2.0 communication
- **Tools**: 41 MCP tools for comprehensive functionality

#### Element System
- **BaseElement**: Abstract base class for all elements
- **IElement Interface**: Common contract for elements
- **Element Types**: Personas, Skills, Templates, Agents, Memories, Ensembles

#### Portfolio Manager
- **Local Storage**: File-based element storage
- **GitHub Sync**: Git-based synchronization
- **Version Control**: Full git integration

#### Security Layer
- **Input Validation**: All inputs sanitized
- **Path Security**: Traversal prevention
- **Token Management**: Encrypted storage

### Data Flow

1. **Client Request** ‚Üí MCP Server
2. **Tool Routing** ‚Üí Appropriate handler
3. **Element Processing** ‚Üí Element system
4. **Storage** ‚Üí Portfolio manager
5. **Response** ‚Üí Client

For detailed architecture documentation, see [Architecture Guide](docs/ARCHITECTURE.md).

## üéØ Troubleshooting

### Common Issues

#### MCP Server Not Connecting

**Symptoms**: Claude Desktop doesn't show DollhouseMCP in available servers

**Solutions**:
1. Verify configuration file location:
   - macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`
   - Windows: `%APPDATA%\Claude\claude_desktop_config.json`
2. Check JSON syntax is valid
3. Restart Claude Desktop after configuration changes

#### OAuth Authentication Fails

**Symptoms**: Cannot authenticate with GitHub

**Solutions**:
1. Check internet connection
2. Verify GitHub account has proper permissions
3. Try using Personal Access Token instead:
   ```bash
   export GITHUB_TOKEN=your_pat_token
   ```
4. Clear cached credentials and retry

#### Elements Not Loading

**Symptoms**: Portfolio appears empty

**Solutions**:
1. Check portfolio directory exists: `~/.dollhouse/portfolio/`
2. Verify file permissions
3. Run `list_portfolio_elements` tool to diagnose
4. Check element file format (YAML frontmatter required)

#### Performance Issues

**Symptoms**: Slow response times

**Solutions**:
1. Check portfolio size (large portfolios may be slow)
2. Verify adequate system resources
3. Consider using pagination for large lists
4. Check network latency for GitHub operations

### Getting Help

- **Documentation**: [Full docs](https://github.com/DollhouseMCP/mcp-server/tree/main/docs)
- **Issues**: [GitHub Issues](https://github.com/DollhouseMCP/mcp-server/issues)
- **Discussions**: [GitHub Discussions](https://github.com/DollhouseMCP/mcp-server/discussions)

For detailed troubleshooting, see [Troubleshooting Guide](docs/troubleshooting/).

## ü§ù Contributing

We welcome contributions to DollhouseMCP! Here's how you can help:

### Ways to Contribute

- **üêõ Report Bugs**: Open an issue with reproduction steps
- **‚ú® Request Features**: Suggest new functionality
- **üìù Improve Documentation**: Fix typos, add examples
- **üíª Submit Code**: Fix bugs or implement features
- **üé® Share Elements**: Contribute personas, skills, templates

### Development Process

1. **Fork the Repository**
   ```bash
   gh repo fork DollhouseMCP/mcp-server
   ```

2. **Create Feature Branch**
   ```bash
   git checkout -b feature/your-feature
   ```

3. **Make Changes**
   - Follow existing code style
   - Add tests for new functionality
   - Update documentation

4. **Test Thoroughly**
   ```bash
   npm test
   npm run lint
   npm run typecheck
   ```

5. **Submit Pull Request**
   - Target the `develop` branch
   - Provide clear description
   - Reference any related issues

### Code Style

- TypeScript with strict mode
- ESLint configuration provided
- Prettier for formatting
- Comprehensive JSDoc comments

### Commit Messages

Follow conventional commits:
- `feat:` New feature
- `fix:` Bug fix
- `docs:` Documentation
- `test:` Testing
- `chore:` Maintenance

### Review Process

1. Automated CI checks must pass
2. Code review by maintainers
3. Address feedback
4. Merge when approved

For detailed guidelines, see [CONTRIBUTING.md](CONTRIBUTING.md).

## üìö Resources

### Documentation

- **[Quick Start Guide](docs/QUICK_START.md)** - Get up and running quickly
- **[Portfolio Setup](docs/guides/PORTFOLIO_SETUP_GUIDE.md)** - Configure your portfolio
- **[Element Development](docs/ELEMENT_DEVELOPER_GUIDE.md)** - Create custom elements
- **[API Reference](docs/API_REFERENCE.md)** - Complete tool documentation
- **[Architecture Guide](docs/ARCHITECTURE.md)** - System design details
- **[Security Documentation](docs/SECURITY.md)** - Security measures and best practices

### Repositories

- **[Main Repository](https://github.com/DollhouseMCP/mcp-server)** - Core MCP server
- **[Collection](https://github.com/DollhouseMCP/collection)** - Community elements
- **[Developer Kit](https://github.com/DollhouseMCP/developer-kit)** - Development tools

### Community

- **[GitHub Discussions](https://github.com/DollhouseMCP/mcp-server/discussions)** - Q&A and ideas
- **[GitHub Issues](https://github.com/DollhouseMCP/mcp-server/issues)** - Bug reports and features
- **[Discord Server](#)** - Real-time chat (coming soon)

### External Resources

- **[Model Context Protocol](https://modelcontextprotocol.io)** - MCP specification
- **[Claude Desktop](https://claude.ai/download)** - AI assistant with MCP support
- **[Anthropic Documentation](https://docs.anthropic.com)** - Claude documentation

### Learning Materials

- **Tutorials** (coming soon)
  - Building Your First Persona
  - Creating Custom Skills
  - Portfolio Management Best Practices
  - GitHub Integration Setup

- **Videos** (coming soon)
  - Installation Walkthrough
  - Feature Demonstrations
  - Developer Tutorials

### Support

- **GitHub Issues**: [Report issues or request features](https://github.com/DollhouseMCP/mcp-server/issues)
- **Security Issues**: [Private security advisories](https://github.com/DollhouseMCP/mcp-server/security/advisories)
- **Discussions**: [Community Q&A](https://github.com/DollhouseMCP/mcp-server/discussions)

## üè∑Ô∏è Version History

### v1.9.9 - 2025-09-22

#### ‚ú® Features
- **Security Utilities Module** (PR #1072)
  - New `src/utils/securityUtils.ts` with reusable security patterns
  - Prototype pollution protection functions
  - Safe object creation with Object.create(null)
  - Secure property setting with Object.defineProperty()

- **Memory Auto-Repair** (PR #1070)
  - Automatic repair of corrupted memory timestamps during read operations
  - No migration needed - repairs happen transparently
  - Enhanced sorting operations with defensive timestamp conversions

#### üîß Fixed
- **Memory Timestamp Crashes** (PR #1070)
  - Fixed toISOString() errors when memory entries have string timestamps (#1069)
  - Added comprehensive timestamp validation with detailed error reporting

- **Security Badge Link** (PR #1071, #1075)
  - Fixed broken security badge link in README pointing to docs/SECURITY.md
  - Badge now correctly points to SECURITY.md at repository root

- **Prototype Pollution False Positives** (PR #1072)
  - Added CodeQL suppressions for false positive alerts (#202-#205)
  - Implemented belt-and-suspenders protection to satisfy code scanners

#### üîí Security
- Added comprehensive prototype pollution protection across ConfigManager
- Proper CodeQL suppressions for validated false positives
- Enhanced input validation and sanitization

---

### v1.9.8 - 2025-09-20

#### ‚ú® Features
- **Memory Deletion Support** (PR #1043)
  - Full deletion functionality for memory elements
  - Handles date-based folder structure (YYYY-MM-DD)
  - Cleans up both YAML and optional .storage files
  - Deactivates memories before deletion
  - Fixes issue #1040

- **Memory Editing Support** (PR #1044)
  - Complete edit functionality for memory elements
  - Fixed file extension handling (.yaml for memories, .md for others)
  - Supports field updates including nested properties
  - Version auto-increment on edits
  - Fixes issue #1041

- **Memory Validation Support** (PR #1046)
  - Full validation functionality for memory elements
  - Validates metadata, retention settings, entry structure
  - Supports strict mode for additional quality checks
  - Returns detailed validation reports with errors/warnings
  - Fixes issue #1042

#### üîÑ Changed
- **Code Organization**: Test files moved from root directory to proper test subdirectories (PR #1047)
  - Manual test files now in `test/manual/`
  - Security audit reports in `.security-audit/`
  - Cleaner root directory structure

#### Technical Details
- Memory elements now have complete CRUD + validation operations matching other element types
- All memory operations properly handle the date-based folder structure
- Comprehensive test coverage for all new memory operations

---

### v1.9.7 - 2025-09-20

#### üîß Fixed
- **NPM Package Build**: Corrected v1.9.6 NPM package which was built from wrong commit
  - The v1.9.6 tag was created before the memory display fixes were merged
  - This resulted in the NPM package missing the critical memory content display fix
  - v1.9.7 includes all fixes that were intended for v1.9.6
  - Memory elements now correctly display their content instead of "No content stored"

#### Note
This release republishes v1.9.6 with the correct code. The memory display fix (PR #1036) and other improvements were merged to main before the v1.9.6 release but the NPM package was accidentally built from an earlier commit.

---

### v1.9.6 - 2025-09-20

#### üéâ First External Contribution
- **Community Milestone**: This release includes improvements from our first external contributor! Special thanks to **Jeet Singh (@jeetsingh008)** for identifying performance and security improvements in PR #1035.

#### üîß Fixed
- **Memory Display Bug**: Added content getter to Memory class (PR #1036)
  - Fixed "No content stored" issue when displaying memory elements
  - Memory files were being loaded but content wasn't accessible
  - Added proper getter method to retrieve content from entries
  - Resolves issue where memories appeared empty despite having content

- **Flaky macOS Tests**: Fixed ToolCache test failures on macOS with Node 22+ (PR #1038)
  - Addressed race condition in directory cleanup
  - Added retry logic for ENOTEMPTY errors during rmdir operations
  - Tests now consistently pass on all platforms and Node versions
  - Particularly affects macOS runners with Node 22.x

#### Enhanced
- **Performance Optimization**: Improved whitespace detection in memory file parsing (PR #1037)
  - Replaced regex-based whitespace detection with character code checks
  - Eliminates repeated regex evaluations during format detection
  - More efficient for large memory files
  - *Improvement identified by @jeetsingh008*

#### üîí Security
- **Path Validation**: Strengthened path traversal protection (PR #1037)
  - Enhanced validation checks both original and normalized paths
  - Adds validation before path normalization
  - Comprehensive protection against directory traversal attacks
  - *Security enhancement identified by @jeetsingh008*

#### Attribution
The performance and security improvements in this release were originally identified and proposed by **Jeet Singh (@jeetsingh008)** in PR #1035. While we implemented these changes internally for security review purposes, full credit goes to Jeet for these valuable contributions. Thank you for helping make DollhouseMCP better! üôè

---

### v1.9.5 - 2025-09-19

#### üîß Fixed
- **Memory YAML Parsing**: Fixed memory files not displaying correct names for pure YAML format
  - Memory files saved by v1.9.3+ are pure YAML without frontmatter markers
  - MemoryManager.load() now detects pure YAML and wraps it for SecureYamlParser compatibility
  - Added proper handling for nested metadata structure (data.metadata || data)
  - Fixed entries loading to look in correct location (parsed.data.entries)
  - Added edge case handling for empty memory files
  - Fixes issue where v1.9.3/v1.9.4 memory files showed as "Unnamed Memory"

#### Enhanced
- **Test Coverage**: Added comprehensive tests for memory file format handling
  - Test for pure YAML files without frontmatter markers
  - Test for files with frontmatter (backward compatibility)
  - Test for empty file handling
  - Test for mixed formats in same directory
  - All 40 MemoryManager tests now passing

#### Technical Details
- SecureYamlParser is designed for markdown files with YAML frontmatter
- Memory files are pure YAML, requiring format detection and wrapping
- Solution maintains backward compatibility while fixing the core issue

---

### v1.9.4 - 2025-09-19

#### üîß Fixed
- **Memory Name Display**: Fixed memory elements showing as "Unnamed Memory" in list output
  - Corrected metadata parsing to use `parsed.data` instead of `parsed.metadata`
  - SecureYamlParser returns YAML frontmatter in the `data` property for markdown files
  - Added `parseRetentionDays()` helper to handle various retention formats (permanent, perpetual, "30 days")
  - Memory files are correctly identified as .yaml format only (removed incorrect .md support)
  - Ensures `validateAndResolvePath()` only accepts .yaml and .yml extensions for consistency
  - Fixes PR #1030: All memory names now display correctly instead of showing "Unnamed Memory"

#### Technical Details
- The bug was caused by incorrect property path when parsing YAML frontmatter from SecureYamlParser
- Legacy .md files in memories directory are templates/schemas, not actual memory files
- All real memory files are stored as .yaml in date-based folders as designed

---

### v1.9.3 - 2025-09-19

#### üîß Fixed
- **Memory Element MCP Support**: Added complete Memory element support to all MCP tool handlers
  - Fixed "Unknown element type 'memories'" errors in DollhouseMCP client
  - Added Memory case handling to 8 critical methods in src/index.ts:
    - `listElements`: Lists available memories with retention policy and tags
    - `activateElement`: Activates memory and shows status
    - `getActiveElements`: Shows active memories with their tags
    - `deactivateElement`: Deactivates memory elements
    - `getElementDetails`: Shows comprehensive memory details
    - `reloadElements`: Reloads memories from portfolio
    - `createElement`: Creates new memory instances with content
    - `editElement`: Supports editing memory properties
  - Memory infrastructure was already implemented but MCP tool handlers were missing the switch cases
  - Fixes user-reported issue with memories not working in v1.9.2

#### üîß Fixed
- **Test Compatibility**: Updated GenericElementTools test to use ensembles instead of memories
  - Test was expecting memories to be unsupported but they are now fully functional
  - Changed test to use ensembles which remain unsupported for creation/editing/validation

---

### v1.9.2 - 2025-09-19

#### üîß Fixed
- **Branch Synchronization**: Resolved divergence between main and develop branches
  - Synchronized documentation updates that were only in develop
  - Fixed security audit suppressions path to use proper location
  - Ensured all v1.9.0 and v1.9.1 features are properly documented

#### Enhanced
- **Documentation**: Updated README and CHANGELOG to accurately reflect all implemented features
- **Security Audit**: Corrected suppressions file path from root to proper config location

#### Technical Details
- Merged 58 commits from develop that were missing from main
- No actual code changes to Memory element (already fully implemented in main)
- Primary changes are documentation and configuration fixes

---

### v1.9.1 - 2025-09-19

#### üîß Fixed
- **Memory Element Support**: Fixed validation and tool descriptions for memory elements
  - Added 'memories' to all validation arrays in index.ts
  - Updated browse_collection, get_collection_content, and install_collection_content tool descriptions
  - Fixed switch statements to handle memory element type properly
  - Resolves Issue #1019 where browse_collection returned "Invalid type 'memories'" error
  - Memory elements can now be browsed, installed, and managed through all MCP tools

#### Technical Details
- Modified validation arrays at lines 2034, 5322, and 5394 in src/index.ts
- Added memory case to element type switch statements
- Updated all collection tool descriptions to include memory elements
- Clean hotfix approach with cherry-picked commit from develop branch

---

### v1.9.0 - 2025-09-17

#### ‚ú® Features
- **Memory Element Implementation**: Complete memory element support with advanced features
  - Persistent context storage across sessions
  - Date-based folder organization for scalability
  - Search indexing with content-based retrieval
  - Retention policies and privacy levels
  - Performance optimizations for large memory sets

#### Enhanced
- **Collection Support**: Full memory element support in collection browsing and installation
- **Portfolio System**: Memory elements fully integrated with portfolio management

---

### v1.8.1 - 2025-09-15

#### üîß Fixed
- **Extended Node Compatibility**: Fixed Headers constructor undefined in CI environment
  - Replaced Headers constructor with plain object mock to ensure cross-platform compatibility
  - Previously failing test "should provide helpful error messages for common failures" now passes consistently
  - Improves CI reliability for Extended Node Compatibility workflow
- **Documentation**: Updated website URL to reflect live status (removed "(planned)" designation)
  - Website https://dollhousemcp.com is now live and accessible
  - Updated README chunks and regenerated documentation files

#### üîÑ Changed
- **CI Reliability**: Enhanced test infrastructure for better cross-platform compatibility
- **Test Mocking**: Improved mock strategies to work in both local and CI environments

---

### v1.8.0 - 2025-09-15

#### üö® Breaking Changes
- **Configuration Wizard Auto-Trigger Removed**: The configuration wizard no longer appears automatically on first MCP interaction
  - Different LLMs handled auto-insertion unpredictably, causing UX inconsistencies
  - Migration: Wizard still available manually via `config` tool with `action: 'wizard'`

#### ‚ú® Features
#### Major Portfolio System Enhancements
- **Configurable Repository Names**: Portfolio repository names now configurable via `TEST_GITHUB_REPO` environment variable
- **Full Portfolio Sync Functionality**: Complete bidirectional sync with GitHub portfolios
  - `sync_portfolio pull` functionality for downloading elements from GitHub
  - Three sync modes: additive (default), mirror, backup
  - Dry-run mode with change preview
  - Progress reporting and conflict resolution
- **Portfolio Pull Handler**: New modular architecture for GitHub portfolio synchronization
  - PortfolioPullHandler for orchestrating pull operations
  - PortfolioSyncComparer for intelligent comparison logic
  - PortfolioDownloader with Unicode normalization and batch processing
- **Enhanced Tool Clarity**: Renamed conflicting tools for better user experience
  - `install_content` ‚Üí `install_collection_content` (install FROM collection)
  - `submit_content` ‚Üí `submit_collection_content` (submit TO collection)
  - Maintained `sync_portfolio` for bulk operations

#### GitHub Integration Improvements
- **Portfolio Repository Management**: Comprehensive GitHub repository management
  - Automated repository creation and initialization
  - Smart conflict detection and resolution
  - Authenticated username resolution for portfolio operations
- **Rate Limiting Fixes**: Resolved bulk operation failures
  - Fixed redundant token validation causing GitHub API rate limits
  - Added tokenPreValidated flag to prevent validation on every API call
  - Improved bulk sync success rate from 0% to functional operation
- **Filename Transformation Fix**: Fixed critical portfolio sync issue
  - Resolved mismatch between GitHub filenames and local processing
  - Portfolio pull operations now correctly find and restore files
  - Eliminated "No elements found in GitHub portfolio" errors

#### Test Infrastructure & Environment
- **Isolated Test Environment**: Dedicated test infrastructure with real GitHub integration
  - Created dollhouse-test-portfolio repository for safe testing
  - Docker Compose configuration for test environment
  - Configurable test parameters via environment variables
- **Enhanced Test Coverage**: Comprehensive unit tests for portfolio functionality
  - PortfolioSyncComparer.test.ts (11 test suites, 15 tests)
  - PortfolioDownloader.test.ts (5 test suites, 15 tests)
  - Performance tests for large portfolios (1000+ elements)

#### üîß Fixed
#### Critical Portfolio Sync Issues
- **Issue #930**: Portfolio sync pull failures resolved
  - Fixed filename transformation mismatch preventing file restoration
  - GitHub operations now use consistent filename format
- **Issue #913**: Portfolio upload failures with null response errors
  - Fixed IElement object incomplete method implementations
  - Now uses PortfolioElementAdapter pattern for reliable uploads
- **Issue #926**: Rate limiting issues in bulk operations
  - Eliminated redundant token validation calls
  - Batch processing with proper rate limiting

#### GitHub Authentication & API
- **JSON Parsing Error**: Fixed `Unexpected token 'U', "Unauthorized" is not valid JSON` error
  - Added proper response status checking before JSON parsing
  - Improved error messages for authentication failures
- **User Authentication**: Fixed portfolio operations using incorrect usernames
  - Now uses authenticated user's username instead of element author
  - Prevents 404 errors in portfolio sync operations
- **Token Management**: Enhanced GitHub token handling and validation

#### Template System
- **Issue #914**: Template variable interpolation completely broken
  - Refactored template rendering to dedicated TemplateRenderer utility class
  - Fixed variable substitution and validation
  - Added comprehensive error handling and logging

#### Performance
- **Portfolio Sync Optimization**: Significant performance improvements
  - Batch index rebuilds (4x faster for large portfolios)
  - Parallel downloads with rate limiting (up to 5x faster)
  - Single index rebuild after all operations complete
- **Test Coverage**: Maintained 97%+ test coverage across all changes
- **CI Reliability**: Enhanced workflow consistency and eliminated flaky tests

#### Dependencies
- **@modelcontextprotocol/sdk**: Updated to v1.18.0 (latest MCP protocol features)
- **zod**: Updated to v4.1.8 (schema validation improvements)
- **jsdom**: Updated to v27.0.0 (DOM testing environment enhancements)
- **@types/node**: Updated to v24.4.0 (latest Node.js type definitions)

#### üîí Security
- **Input Validation**: Enhanced Unicode normalization to prevent homograph attacks
- **Security Audit Logging**: Added comprehensive logging for portfolio operations
- **Authentication**: Improved GitHub authentication flow reliability
- **YAML Parsing Security**: Enhanced validation to prevent code injection

#### Developer Experience
- **Tool Organization**: Organized 41 MCP tools into 6 logical categories
- **Configuration Wizard**: Interactive setup for new installations
- **Debug Infrastructure**: Enhanced logging and error tracking
- **Documentation**: Comprehensive session notes and troubleshooting guides

---

### v1.7.3 - 2025-09-09

#### üîí Security
- **Critical**: Added prototype pollution protection to prevent `__proto__`, `constructor`, and `prototype` injection attacks in ConfigManager
- Achieved 0 security findings across all severity levels in security audit
- Maintained FAILSAFE_SCHEMA usage with documented security rationale for YAML parsing

#### üîÑ Changed
- **ConfigManager Test Coverage**: Increased from 64.5% to 96.8% (+32.3%)
- Forward compatibility: Unknown configuration fields are now preserved during updates
- Enforced secure file permissions (0o700 for directories, 0o600 for files)
- All file operations now use atomic read/write mechanisms

#### üîß Fixed
- Fixed YAML "null" string being incorrectly parsed as null value
- Resolved race conditions in file operations
- Corrected file permission issues on Unix systems

#### Known Issues
- Test-only: ConfigManager persistence test failing in mock environment (#896)
- Test-only: Two prototype pollution tests not triggering in test environment (#897)

---

### v1.6.11 - 2025-08-28

#### üîß Fixed
- Collection index URL updated to use GitHub Pages instead of raw GitHub URL
- E2E tests now properly prioritize CI environment tokens over local .env files
- MCP tool flow tests handle both string and object response formats for backward compatibility
- Test suite reliability improvements for CI environments

---

### v1.6.10 - 2025-08-28

#### üîß Fixed
- Collection submission pipeline now includes full markdown content with frontmatter (#818)
  - Added missing `localPath` parameter to `submitElementAndHandleResponse()` call
  - Fixes "No frontmatter found" errors in collection workflow
  - Enables proper processing of submitted elements

---

### v1.6.9 - 2025-08-27

Fix content truncation in create_persona tool - personas were being truncated at 1000 chars

---

### v1.6.8 - 2025-08-26

#### üîß Fixed
- OAuth client ID configuration display issue - `configure_oauth` tool now correctly shows "Using Default" instead of "Not Configured" when using the default GitHub OAuth client ID (#782)

---

### v1.6.7 - 2025-08-26

Fixed version update script and improved QA test reliability

---

### v1.6.5 - 2025-08-26

- Portfolio sync fix for markdown elements (#759)
- Intelligent version update system (#760)
- Comprehensive release workflow documentation

All notable changes to DollhouseMCP will be documented in this file.
The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).
## [Unreleased]

---

### v1.6.4 - 2025-08-25

#### üîß Fixed
- **OAuth Helper NPM Packaging** - Fixed missing oauth-helper.mjs file in NPM distribution
  - Added `oauth-helper.mjs` to package.json files array for proper NPM packaging
  - Added additional fallback path in src/index.ts for NPM package installations
  - OAuth authentication now works correctly for users installing from NPM
- **Performance Testing Workflow** - Fixed performance tests failing in CI
  - Changed workflow to run only performance tests instead of entire test suite
  - Used targeted command: `npm test -- test/__tests__/performance/ --no-coverage`
  - Performance monitoring workflow now runs correctly in GitHub Actions

---

### v1.6.3 - 2025-08-25

#### üîß Fixed
- **OAuth Authentication** - Fixed invalid OAuth client ID and added comprehensive error handling
  - Updated default client ID from incorrect `Ov23liXGGP9jNrBhBNfO` to correct `Ov23li9gyNZP6m9aJ2EP`
  - Added unique error codes throughout OAuth flow for precise debugging
  - Added debug logging at each step of the authentication process
  - Improved error messages to be specific and actionable
  - Fixed TypeScript compilation issue with missing DeviceCodeResponse import

---

### v1.6.2 - 2025-08-25

#### üîß Fixed
- **Critical OAuth Bug** - Fixed default client ID not being used in `setup_github_auth`
  - The v1.6.1 release had a bug where `setupGitHubAuth()` bypassed the default fallback
  - Made `GitHubAuthManager.getClientId()` public instead of private
  - Updated `setupGitHubAuth()` to use proper fallback chain
  - Now correctly uses default OAuth client ID when no configuration exists
  - Restores the "just works" authentication experience promised in v1.6.1

---

### v1.6.1 - 2025-08-25

#### üîß Fixed
- **OAuth Default Client ID** - Fixed "just works" authentication for NPM installs
  - Added default DollhouseMCP OAuth Client ID for seamless setup
  - Users can now run `setup_github_auth` without any configuration
  - OAuth device flow with 8-character code works out of the box
  - Maintains backward compatibility with environment variables and config

---

### v1.6.0 - 2025-08-25

#### ‚ú® Features
- **Collection Submission Workflow** (#549) - Complete community contribution pipeline
  - Enhanced `submit_content` tool to optionally submit to DollhouseMCP collection after portfolio upload
  - Automatic GitHub issue creation in collection repository with proper labels
  - New configuration tools: `configure_collection_submission` and `get_collection_submission_config`
  - Opt-in behavior via environment variable or configuration setting
  - Comprehensive error handling with fallback to manual submission
- **OAuth Personal Access Token (PAT) Support** (#724) - Dual-mode authentication for testing
  - Added PAT support alongside OAuth device flow for automated testing
  - Created unified authentication utility for both OAuth and PAT modes
  - Comprehensive test suite for OAuth/PAT functionality
  - Complete documentation for testing vs production authentication
- **Performance Optimizations** (#700) - Significant startup and runtime improvements
  - Tool caching to reduce redundant initialization
  - Lazy loading for collection operations
  - Reduced memory footprint and faster response times
- **QA Test Framework** (#689, #677, #683) - Comprehensive testing infrastructure
  - Added QA metrics and dashboard for test monitoring
  - Implemented test data cleanup mechanism for CI reliability
  - Added comprehensive CI/CD pipeline integration
  - Automated test execution with metrics collection

#### Breaking Changes
- **Removed Deprecated Marketplace Aliases** (#548) - Performance improvement
  - Removed 5 deprecated tool aliases that duplicated collection tools
  - Tools removed: `browse_marketplace`, `search_marketplace`, `get_marketplace_persona`, `install_persona`, `submit_persona`
  - **Migration required**: Use `browse_collection`, `search_collection`, `get_collection_content`, `install_content`, `submit_content` instead
  - Reduces tool count by 5, improving MCP initialization performance

#### üîß Fixed
- **OAuth Token Persistence** (#719) - Fixed critical authentication issue
  - Replaced unreliable background helper process with main process polling
  - OAuth tokens now persist correctly after device flow authorization
  - Improved reliability and user experience for authentication
- **Build Info Tool Format** (#726) - Fixed MCP protocol compliance
  - Corrected `get_build_info` tool return format to match MCP requirements
  - Tool now returns proper MCP response format instead of plain string
  - Resolves Claude Desktop hanging issue
- **GitHub Token Validation** (#701) - Made token validation more flexible
  - Fixed overly strict token validation that blocked valid tokens
  - Improved compatibility with different GitHub token formats
- **Environment Variable Naming** (#725) - Fixed GitHub Actions compatibility
  - Changed from `GITHUB_TEST_TOKEN` to `TEST_GITHUB_TOKEN`
  - GitHub Actions secrets cannot start with "GITHUB_"

#### üîí Security
- **YAML Bomb Detection** (#364) - Comprehensive protection against denial of service
  - Added detection for recursive YAML structures
  - Added circular reference chain detection  
  - Added excessive alias amplification detection
  - Prevents memory exhaustion from malicious YAML patterns

---

For complete release history prior to v1.6.0, see the [GitHub Releases](https://github.com/DollhouseMCP/mcp-server/releases) page.

## üìú License

This project is licensed under the **GNU Affero General Public License v3.0 (AGPL-3.0)** with Platform Stability Commitments.

### What This Means

#### ‚úÖ You CAN:
- Use the software for personal projects
- Use the software for commercial projects
- Modify the source code
- Distribute the software
- Use personas and elements you create

#### ‚ö†Ô∏è You MUST:
- Include the license and copyright notice
- State changes made to the code
- Disclose your source code when distributing
- Use the same AGPL-3.0 license for derivatives
- **Make network use source available** (AGPL requirement)

#### ‚ùå You CANNOT:
- Hold us liable for damages
- Use our trademarks without permission
- Claim warranty or guarantee of fitness
- Resell commercially

### Platform Stability Commitments

We provide additional guarantees beyond the AGPL-3.0:

- **90-day advance notice** for monetization policy changes
- **12-month revenue sharing locks** for content creators
- **Full data portability** - export all your content anytime
- **180-day transition period** for platform ownership changes
- **Community advisory input** on major policy decisions

### Contributor License Agreement

By contributing to DollhouseMCP, you agree that:

1. You have the right to grant us license to your contribution
2. Your contribution is licensed under AGPL-3.0
3. You grant us additional rights to use your contribution in our commercial offerings
4. You retain copyright to your contribution

For the complete license text, see [LICENSE](LICENSE).

### Questions?

If you have questions about the license or what you can do with DollhouseMCP:

- **Documentation**: [License FAQ](docs/LICENSE_FAQ.md)
- **GitHub Issue**: Open an issue with the `license` label
- **Discussions**: Ask in [GitHub Discussions](https://github.com/DollhouseMCP/mcp-server/discussions)

---

*Copyright ¬© 2025 DollhouseMCP. All rights reserved.*