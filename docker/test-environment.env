# Test Environment Configuration for Docker MCP Testing
# This file configures an isolated test environment with REAL GitHub authentication

# Test Mode - Enables test data and isolated portfolio
TEST_MODE=true    # Activates test-specific behaviors and safety features
NODE_ENV=test     # Sets Node environment to test for proper module loading

# Isolated Test Portfolio (separate from user data)
# These paths ensure test operations never touch production data
DOLLHOUSE_PORTFOLIO_DIR=/app/test-portfolio   # Isolated portfolio directory for test elements
DOLLHOUSE_CACHE_DIR=/app/test-cache          # Separate cache to avoid polluting production cache
DOLLHOUSE_TEST_DATA_DIR=/app/test-data       # Mount point for test fixtures

# Test User Identity (can be overridden)
# Default test user prevents attribution to real users
DOLLHOUSE_USER=test-user                     # Generic test username
DOLLHOUSE_EMAIL=test@dollhousemcp.test       # Non-routable test email

# Real GitHub Authentication Required
# These should be set when running the container:
# GITHUB_TOKEN=${GITHUB_TOKEN}
# or use setup_github_auth tool in the container

# Test GitHub Repository Configuration
# For integration testing, use a dedicated test repository
TEST_GITHUB_USER=${TEST_GITHUB_USER:-mickdarling}
TEST_GITHUB_REPO=${TEST_GITHUB_REPO:-dollhouse-test-portfolio}
TEST_GITHUB_PRIVATE=false

# Collection Settings
# Use real collection but with test cache
USE_COLLECTION_CACHE=true      # Enables caching to reduce API calls during testing
COLLECTION_CACHE_TTL=300       # 5-minute cache TTL for faster test iterations

# Logging
LOG_LEVEL=debug
LOG_TO_FILE=true
LOG_DIR=/app/test-logs

# Test Data Configuration
PRELOAD_TEST_PERSONAS=true
PRELOAD_TEST_ELEMENTS=true
TEST_ELEMENT_COUNT=5

# Safety Features for Test Mode
# These settings prevent accidental data loss or unwanted operations during testing
DRY_RUN_BY_DEFAULT=true        # Forces dry-run mode unless explicitly overridden
REQUIRE_CONFIRMATIONS=true    # Requires user confirmation for destructive operations
MAX_SYNC_ITEMS=10              # Limits number of items that can be synced to prevent bulk operations

# Performance Settings for Testing
MAX_PERSONAS=100               # Limits persona count to prevent memory issues
CACHE_TTL=60                   # 1-minute cache for quick test cycles
REQUEST_TIMEOUT=5000           # 5-second timeout for API calls