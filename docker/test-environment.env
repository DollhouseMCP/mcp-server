# Test Environment Configuration for Docker MCP Testing
# This file configures an isolated test environment with REAL GitHub authentication

# Test Mode - Enables test data and isolated portfolio
# Activates test-specific behaviors and safety features
TEST_MODE=true
# Sets Node environment to test for proper module loading    
NODE_ENV=test

# Isolated Test Portfolio (separate from user data)
# These paths ensure test operations never touch production data
# Isolated portfolio directory for test elements
DOLLHOUSE_PORTFOLIO_DIR=/app/test-portfolio
# Separate cache to avoid polluting production cache  
DOLLHOUSE_CACHE_DIR=/app/test-cache
# Mount point for test fixtures
DOLLHOUSE_TEST_DATA_DIR=/app/test-data

# Test User Identity (can be overridden)
# Default test user prevents attribution to real users
# Generic test username  
DOLLHOUSE_USER=test-user
# Non-routable test email
DOLLHOUSE_EMAIL=test@dollhousemcp.test

# Real GitHub Authentication Required
# These should be set when running the container:
# GITHUB_TOKEN=${GITHUB_TOKEN}
# or use setup_github_auth tool in the container

# Test GitHub Repository Configuration
# For integration testing, use a dedicated test repository
TEST_GITHUB_USER=${TEST_GITHUB_USER:-mickdarling}
TEST_GITHUB_REPO=${TEST_GITHUB_REPO:-dollhouse-test-portfolio}
TEST_GITHUB_PRIVATE=false

# Collection Settings
# Use real collection but with test cache
# Enables caching to reduce API calls during testing
USE_COLLECTION_CACHE=true
# 5-minute cache TTL for faster test iterations
COLLECTION_CACHE_TTL=300

# Rate Limiting Protection
# Skip token validation to prevent GitHub rate limits during bulk operations
SKIP_TOKEN_VALIDATION=true

# Logging
LOG_LEVEL=debug
LOG_TO_FILE=true
LOG_DIR=/app/test-logs

# Test Data Configuration
PRELOAD_TEST_PERSONAS=true
PRELOAD_TEST_ELEMENTS=true
TEST_ELEMENT_COUNT=5

# Safety Features for Test Mode
# These settings prevent accidental data loss or unwanted operations during testing
# Forces dry-run mode unless explicitly overridden
DRY_RUN_BY_DEFAULT=true
# Requires user confirmation for destructive operations
REQUIRE_CONFIRMATIONS=true
# Limits number of items that can be synced to prevent bulk operations
MAX_SYNC_ITEMS=10

# Performance Settings for Testing  
# Limits persona count to prevent memory issues
MAX_PERSONAS=100
# 1-minute cache for quick test cycles
CACHE_TTL=60
# 5-second timeout for API calls
REQUEST_TIMEOUT=5000